(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,i){e.exports=i(17)},17:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),r=i(10),s=i.n(r),o=i(6),h=i(1),l=i(2),c=i(4),u=i(3),d=i(5);function m(e,t,i){return e>=t&&e<=i}var v=i(11),b=i.n(v),p=function(e){function t(){var e,i;Object(h.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(i=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).handleTouchStart=function(e){e.preventDefault(),console.log("touch start"),i.holdTimeout=setTimeout(function(){i.props.onContextMenu(),window.navigator.vibrate([200]),clearTimeout(),i.holdTimeout=null},500)},i.handleTouchEnd=function(e){e.preventDefault(),console.log("touch end"),i.holdTimeout&&(clearTimeout(),i.holdTimeout=null,i.props.onClick())},i}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,i=t.onClick,a=t.onContextMenu,r=t.visible,s=t.marked,h=t.value;return n.a.createElement("div",{tabIndex:"0",className:b()("Cell",(e={visible:r},Object(o.a)(e,"value_".concat(h),r),Object(o.a)(e,"hidden",!r),Object(o.a)(e,"marked",s),e)),onClick:i,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchEnd,onContextMenu:a})}}]),t}(a.PureComponent),f=function(e){function t(){var e,i;Object(h.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(i=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={board:[],result:"playing"},i.beatingGame=!1,i}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.height,i=e.width,a=e.mines;this.generateMines(t,i,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.height,i=e.width,a=e.mines;this.generateMines(t,i,a)}},{key:"resetState",value:function(){this.setState({board:[],result:"playing"}),this.beatingGame=!1}},{key:"generateMines",value:function(e,t,i){var a=e*t,n=i;this.resetState();for(var r=[],s=0;s<t;s++){r[s]=[];for(var o=0;o<e;o++)r[s][o]={hasMine:!1,isMarked:!1,isVisible:!1}}for(var h=0;h<e;h++)for(var l=0;l<t;l++)n/a>=Math.random()&&(n--,r[l][h].hasMine=!0),a--;this.hidden=e*t,this.setState({board:r})}},{key:"beatGame",value:function(){this.setState({result:"Win"}),this.beatingGame||"lost"===this.state.result||(this.beatingGame=!0,window.alert("You beat the game!"))}},{key:"onClickCell",value:function(e,t){var i=this,a=this.props.mines,n=this.state,r=n.board;if("playing"===n.result){if(this.isMarked(e,t))return;r[e][t].hasMine&&this.onGameOver();var s=r;this.isVisible(e,t)||(s[e][t].isVisible=!0,this.hidden--),0===this.cellValue(e,t)&&this.onClickZero(e,t),this.setState({board:s},function(){i.hidden===a&&i.beatGame()})}}},{key:"onRightClickCell",value:function(e,t,i){i&&i.preventDefault();var a=this.state,n=a.board;"playing"===a.result&&(n[e][t].isMarked=!n[e][t].isMarked,this.setState({board:n}))}},{key:"onClickZero",value:function(e,t){for(var i=this.state.board,a=this.props,n=a.height,r=a.width,s=i,o=-1;o<=1;o++)for(var h=-1;h<=1;h++)m(e+o,0,r-1)&&m(t+h,0,n-1)&&!this.isVisible(e+o,t+h)&&(0===this.cellValue(e+o,t+h)?this.onClickCell(e+o,t+h):(s[e+o][t+h].isVisible=!0,this.hidden--));this.setState({board:s})}},{key:"onGameOver",value:function(){var e=this.state.board,t=this.props,i=t.height,a=t.width;window.alert("Game Over!");for(var n=e,r=0;r<a;r++)for(var s=0;s<i;s++)n[r][s].isVisible=!0;this.setState({board:n,result:"lost"})}},{key:"isVisible",value:function(e,t){return this.state.board[e][t].isVisible}},{key:"isMarked",value:function(e,t){return this.state.board[e][t].isMarked}},{key:"cellValue",value:function(e,t){var i=this.props,a=i.height,n=i.width,r=this.state.board;if(r[e][t].hasMine)return"B";for(var s=0,o=-1;o<=1;o++)for(var h=-1;h<=1;h++)m(e+o,0,n-1)&&m(t+h,0,a-1)&&r[e+o][t+h].hasMine&&s++;return s}},{key:"renderRow",value:function(e){for(var t=this.props.width,i=[],a=0;a<t;a++)i.push(n.a.createElement(p,{key:"cell_".concat(a,"_").concat(e),visible:this.isVisible(a,e),marked:this.isMarked(a,e),value:this.cellValue(a,e),onClick:this.onClickCell.bind(this,a,e),onContextMenu:this.onRightClickCell.bind(this,a,e)}));return i}},{key:"renderTable",value:function(){for(var e=this.props.height,t=[],i=0;i<e;i++)t.push(n.a.createElement("div",{className:"row",key:"row_".concat(i)},this.renderRow(i)));return n.a.createElement("div",{className:"Board"},t)}},{key:"render",value:function(){var e=this.props,t=e.height,i=e.width;return n.a.createElement("div",null,n.a.createElement("h1",null,"table ",t,"x",i),this.renderTable())}}]),t}(a.Component),g=function(e){function t(){var e,i;Object(h.a)(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(i=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={height:10,width:10,mines:10},i.form={height:10,width:10,mines:10},i}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,i="checkbox"===t.type?t.checked:+t.value,a=t.name;if(("height"===a||"width"===a)&&i>50&&(i=50),"mines"===a){var n=this.form.width*this.form.height;i>n&&(i=n)}this.setState(Object(o.a)({},a,i))}},{key:"render",value:function(){var e=this.state,t=e.height,i=e.width,a=e.mines;return n.a.createElement("div",{className:"App"},n.a.createElement("form",null,n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"height"},"Height"),n.a.createElement("input",{type:"number",id:"height",name:"height",placeholder:"height",value:t,onChange:this.handleInputChange.bind(this)})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"width"},"Width"),n.a.createElement("input",{type:"number",id:"width",name:"width",placeholder:"width",value:i,onChange:this.handleInputChange.bind(this)})),n.a.createElement("div",{className:"input-field"},n.a.createElement("label",{htmlFor:"mines"},"Mines"),n.a.createElement("input",{type:"number",id:"mines",name:"mines",placeholder:"mines",value:a,onChange:this.handleInputChange.bind(this)}))),n.a.createElement("p",null,"0.0.5"),n.a.createElement(f,{height:this.state.height,width:this.state.width,mines:this.state.mines}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.d19e994a.chunk.js.map